<h2 id="noteson-technical-demonstration-of-ingest-nodes">Noteson technical demonstration of ingest nodes</h2>
<p>These notes should be read in conjunction with the <a href="https://drive.google.com/file/d/1OwKyH_-rNsl6tYgMqq_oxzw-TatVyjHs/view?usp=sharing">session recording</a>.</p>
<h2 id="agenda">Agenda</h2>
<ul>
<li>Review of last session and context setting for this one
<ul>
<li><a href="https://dev.azure.com/exploreai/_git/EXPLORE.Retail?path=/docs/data_management/ingest_high_level_philosophy/overview.html&amp;_a=preview">Previous session</a> was focussed on the “Why”, today we will focus on the “How”.</li>
<li>We will review main tenants of the “Why” before moving on.</li>
</ul></li>
<li>Demo of standard DBT project: DBT-based ingest node “Dummy Jaffle”.</li>
<li>Demo of DBT project with automate_dv DBT macro extension: “Dummy Bridgetown”.</li>
</ul>
<p>We will demonstrate aspects of:</p>
<ul>
<li>DBT-based ingest node
<ul>
<li>best suited for OLAP use case</li>
<li>can ingest data through <a href="https://docs.getdbt.com/docs/build/seeds"><code>dbt seed</code></a></li>
<li>can ingest data from cloud storage through <a href="https://learn.microsoft.com/en-us/azure/databricks/ingestion/copy-into/"><code>COPY INTO</code></a> statement</li>
<li>can model data using <a href="https://docs.getdbt.com/docs/build/models">DBT models</a></li>
<li>can use macro packages such as automate_dv to simplify data vault building</li>
</ul></li>
<li>(did not get to this) DBMate-based ingest node
<ul>
<li>best suited for OLTP use case</li>
<li>can perform <a href="https://en.wikipedia.org/wiki/Schema_migration">database schema migrations</a> through the use of <a href="https://github.com/amacneil/dbmate">dbmate</a></li>
</ul></li>
</ul>
<h2 id="definitions">Definitions</h2>
<ul>
<li>Cookiecutter - a template system for configuring projects based on questions asked and answers given.</li>
<li>Jinja2 - template language used by Cookiecutter.</li>
<li>Docker - container system used to bundle code and execute locally and remotely.</li>
<li>Databricks Serverless SQL Warehouse - serverless cloud storage substrate and query engine supported by the DBT-based ingest node.</li>
<li>PostgreSQL - RDBMS supported by the DBT and DBMate ingest nodes.</li>
<li>DBT - data build tool based on Jinja2 responsible for the main work that the DBT-based ingest node performs.</li>
<li>DBMate - light-weight “database schema migration” tool used in the DBMate-based ingest node.</li>
<li>Database Schema Migrations - industry standard way of cumulatively applying changes to a database schema as part of a deployment pipeline.</li>
<li>Bash - scripting system on unix/linux.</li>
<li>ADO Pipelines - YML-driven CI / CD system on Azure.</li>
<li>Azure Container Registry - a registry system for housing docker images on Azure.</li>
<li>Databricks Personal Access Token (PAT) - a UUID-like token that you can configure on Databricks on a per-workspace basis in order to gain access to resources.</li>
<li>DBT-based ingest node - a system with DBT at it’s heart for developing data ingest and transformation logic to execute locally or remotely, and to target a storage substrate such as DBR or PGSQL particulary well suited for ELT-type work for OLAP use cases.</li>
<li>DBMate-based ingest node - a system with DBMate at it’s heart for developing database schema migrations to execute locally or remotely, and to target a RDBMS storage substrate such as MySQL or PGSQL particularly suited for supporting a OLTP system.</li>
<li>Data Vault - a write-optimised, long-term storage, changed tracked normalised data modelling methadology to fill the gap between raw data and data warehouses.</li>
<li>automate_dv - DBT macro package foor simplifying data vault building.</li>
<li>Data Warehouse - a read-optimised, domain-specific / domain-analytics-specific data modelling methadology for supporting OLAP workloads.</li>
<li>Star Schema - a popular data modelling technique for creating a data warehouse.</li>
</ul>
<h2 id="how-things-relate">How things relate</h2>
<p>This is an attempt at relating things in this space.</p>
<figure>
<img src="data:image/png;base64,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" alt="diagram of how things relate" /><figcaption>diagram of how things relate</figcaption>
</figure>
<h2 id="cookiecutter-run">Cookiecutter run</h2>
<ul>
<li>All of the answers below to the Cookiecutter questions are obtained from ADO and Databricks.</li>
<li>The ADO config file is something you have to setup in your home directory.</li>
<li>The ADO config file is only required for the ADO Pipeline automation, at the time when you want to setup the build, release and schedule pipelines.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">cookiecutter</span> git@ssh.dev.azure.com:v3/exploreai/CORE.Utilities/CORE.Meshnodes.BaseTemplates/ --directory=<span class="st">&quot;ingestnode_dbt&quot;</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="ex">ingest_node_name</span> [Ingest Node Template]: dummy_jaffle</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="ex">az_devops_repo</span> [https://dev.azure.com/exploreai/CORE.Utilities/_git/CORE-POC1]: https://dev.azure.com/exploreai/_git/EXPLORE.Retail</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="ex">Select</span> data_substrate:</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="ex">1</span> - databricks</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="ex">2</span> - postgres</a>
<a class="sourceLine" id="cb1-7" title="7"><span class="ex">Choose</span> from 1, 2 [1]: 1</a>
<a class="sourceLine" id="cb1-8" title="8"><span class="ex">databricks_workspace</span> [https://adb-891777510264692.12.azuredatabricks.net/]: https://adb-4472170994427587.7.azuredatabricks.net/</a>
<a class="sourceLine" id="cb1-9" title="9"><span class="ex">database_host</span> [adb-891777510264692.12.azuredatabricks.net]: adb-4472170994427587.7.azuredatabricks.net</a>
<a class="sourceLine" id="cb1-10" title="10"><span class="ex">databricks_sql_warehouse_path</span> [/sql/1.0/endpoints/a077556ed384ed67]: /sql/1.0/warehouses/22a85ef04a9a546b</a>
<a class="sourceLine" id="cb1-11" title="11"><span class="ex">databricks_catalog</span> [null]: dummy_jaffle</a>
<a class="sourceLine" id="cb1-12" title="12"><span class="ex">database_user</span> [psqladmin]:</a>
<a class="sourceLine" id="cb1-13" title="13"><span class="ex">database_port</span> [5432]: 443</a>
<a class="sourceLine" id="cb1-14" title="14"><span class="ex">database_threads</span> [4]: 5</a>
<a class="sourceLine" id="cb1-15" title="15"><span class="ex">profile_name</span> [data_vault]:</a>
<a class="sourceLine" id="cb1-16" title="16"><span class="ex">azure_storage_container_url</span> [wasbs://adf-pipeline-demo@datavalidation.blob.core.windows.net/]: wasbs://testdatasets@euweairtlgenpocst.blob.core.windows.net/</a>
<a class="sourceLine" id="cb1-17" title="17"><span class="ex">ado_pipelines_build_agent_pool_name</span> [CORE Pipelines]: Default</a>
<a class="sourceLine" id="cb1-18" title="18"><span class="ex">ado_pipelines_folder_name</span> [CORE]: dummy_jaffle</a>
<a class="sourceLine" id="cb1-19" title="19"><span class="ex">ado_profile_name</span> [CORE]: DEFUALT</a>
<a class="sourceLine" id="cb1-20" title="20"><span class="ex">scheduled_release_cron</span> [0 6 * * *]:</a>
<a class="sourceLine" id="cb1-21" title="21"><span class="ex">----------</span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="ex">Template</span> clone successful</a>
<a class="sourceLine" id="cb1-23" title="23"><span class="ex">----------</span></a>
<a class="sourceLine" id="cb1-24" title="24"></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="ex">--</span><span class="op">&gt;</span> Attempting to move pipeline definitions to relevant location...</a>
<a class="sourceLine" id="cb1-26" title="26">         <span class="ex">--</span><span class="op">&gt;</span> Moving files...</a>
<a class="sourceLine" id="cb1-27" title="27">         <span class="ex">--</span><span class="op">&gt;</span> File move successful.</a>
<a class="sourceLine" id="cb1-28" title="28"><span class="ex">--</span><span class="op">&gt;</span> Searching for ADO config file in home dir...</a>
<a class="sourceLine" id="cb1-29" title="29"><span class="ex">?</span> ADO config file detected. Would you like to alter/extend it? No</a>
<a class="sourceLine" id="cb1-30" title="30"><span class="ex">User</span> declined to modify ADO config file at /home/kerneels/.adocfg. Skipping file generation process...</a>
<a class="sourceLine" id="cb1-31" title="31"></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="ex">--</span><span class="op">&gt;</span> Generating <span class="kw">`</span><span class="ex">.env</span><span class="kw">`</span> file from supplied definition file...</a>
<a class="sourceLine" id="cb1-33" title="33">         <span class="ex">--</span><span class="op">&gt;</span> Generation successful.</a>
<a class="sourceLine" id="cb1-34" title="34">         <span class="ex">--</span><span class="op">&gt;</span> Please inspect/edit the generated file at <span class="kw">`</span><span class="ex">dummy_jaffle/.env</span><span class="kw">`</span> to ensure that the contents are correct.</a></code></pre></div>
<p>These notes should be read in conjunction with the <a href="https://drive.google.com/file/d/1OwKyH_-rNsl6tYgMqq_oxzw-TatVyjHs/view?usp=sharing">session recording</a>.</p>
